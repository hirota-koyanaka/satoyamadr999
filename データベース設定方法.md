# データベース設定方法

## 現在の状況

- **データベース**: SQLite（ローカルファイル）
- **場所**: `db.sqlite3`（プロジェクトルート）
- **用途**: 開発・テスト環境

## データベースの選択肢

### 1. SQLite（現在の設定）- 開発環境向け

**メリット:**
- 設定不要で簡単
- ファイルベースで管理が容易
- 開発・テストに最適

**デメリット:**
- 本番環境には不向き
- 複数のサーバーから同時アクセスできない
- バックアップが必要

**現在のユーザーデータ:**
- すべて `db.sqlite3` ファイルに保存されています
- このファイルをバックアップすれば、データを保護できます

### 2. Supabase（PostgreSQL）- 本番環境・クラウド向け

**メリット:**
- 無料枠あり（500MB、2GB転送/月）
- クラウドで自動バックアップ
- 複数のデバイスからアクセス可能
- 本番環境に適している

**デメリット:**
- セットアップが必要
- インターネット接続が必要

**セットアップ手順:**

1. **Supabaseアカウント作成**
   - https://supabase.com にアクセス
   - アカウントを作成してプロジェクトを作成

2. **データベース接続情報を取得**
   - Supabaseダッシュボード → Settings → Database
   - Connection stringをコピー

3. **Djangoの設定を変更**

`backend/settings.py`の`DATABASES`設定を変更：

```python
DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.postgresql",
        "NAME": "your-database-name",
        "USER": "your-username",
        "PASSWORD": "your-password",
        "HOST": "db.your-project.supabase.co",
        "PORT": "5432",
    }
}
```

4. **PostgreSQLドライバーをインストール**

```bash
pip install psycopg2-binary
```

5. **マイグレーションを実行**

```bash
python manage.py migrate
```

### 3. ローカルPostgreSQL - 本格的な開発環境向け

**メリット:**
- 本番環境に近い環境
- パフォーマンスが良い

**デメリット:**
- セットアップが複雑
- ローカルにPostgreSQLをインストールする必要がある

## 推奨

- **開発・テスト**: SQLite（現在の設定）で問題ありません
- **本番環境**: SupabaseまたはPostgreSQLを推奨

## データの移行

SQLiteからSupabase/PostgreSQLに移行する場合：

1. データをエクスポート：
```bash
python manage.py dumpdata > data.json
```

2. 新しいデータベースに移行：
```bash
python manage.py migrate
python manage.py loaddata data.json
```

