# TestFlight デプロイガイド

アプリ名: **satoyamadr**

TestFlightを使用してベータテスターにアプリを配布する手順です。

## TestFlightの利点

- ✅ App Storeの審査より簡単
- ✅ スクリーンショットなどの必須項目が少ない
- ✅ 最大10,000人の外部テスターに配布可能
- ✅ フィードバックを収集しやすい
- ✅ アプリを公開する前にテスト可能

## 前提条件

- [x] App Store Connectでアプリ「satoyamadr」を作成済み
- [x] Bundle Identifier: `com.loginapp.ios`
- [x] Apple Developer Programに登録済み

## ステップ1: Xcodeでアーカイブを作成

### 1.1 プロジェクトを開く

```bash
cd login_app
open ios/Runner.xcworkspace
```

### 1.2 アーカイブを作成

Xcodeで：
1. **Product** → **Scheme** → **Runner** を選択
2. デバイス選択で **「Any iOS Device (arm64)」** を選択
3. **Product** → **Archive** を選択
4. ビルド完了まで待機（数分）

## ステップ2: TestFlightにアップロード

### 2.1 Organizerウィンドウからアップロード

1. アーカイブが完了すると「Organizer」ウィンドウが開きます
2. 作成したアーカイブを選択
3. **「Distribute App」** をクリック
4. **「App Store Connect」** を選択
5. **「Upload」** を選択
6. 配布オプションを確認（通常はデフォルトでOK）
7. **「Upload」** をクリック
8. アップロードが完了するまで待つ（数分〜数十分）

### 2.2 アップロードの確認

1. App Store Connectにログイン
2. 「satoyamadr」アプリを選択
3. **「TestFlight」** タブを開く
4. アップロードしたビルドが表示されるまで待つ（数分〜1時間）
   - ステータス: 「処理中」→「処理済み」→「配信可能」

## ステップ3: TestFlightでビルドを設定

### 3.1 ビルド情報の入力（オプション）

TestFlightでは以下の情報は**オプション**です（App Store提出より簡単）：

- **テスト情報**: テスト手順や注意事項（任意）
- **フィードバックメール**: テスターからのフィードバックを受け取るメールアドレス（任意）

### 3.2 内部テスターに配布

1. TestFlightタブでビルドを選択
2. **「内部テスト」** セクションで
3. **「配信開始」** をクリック
4. 内部テスター（App Store Connectのユーザー）がすぐにテスト可能

### 3.3 外部テスターに配布（オプション）

外部テスターに配布する場合：

1. **「外部テスト」** セクションで
2. **「+」** ボタンをクリック
3. テストグループを作成
4. テスト情報を入力（簡易的な審査あり）
5. テスターのメールアドレスを追加
6. **「配信開始」** をクリック

**注意**: 外部テストは簡易的な審査がありますが、App Storeほど厳しくありません。

## ステップ4: テスターの招待

### 4.1 内部テスター

- App Store Connectの「ユーザとアクセス」で追加したユーザー
- 自動的にTestFlightアプリで利用可能

### 4.2 外部テスター

1. TestFlightでテストグループを作成
2. テスターのメールアドレスを追加
3. テスターに招待メールが送信されます
4. テスターはTestFlightアプリをインストールしてテスト

## ステップ5: テスターがアプリをインストール

### テスター側の手順

1. **TestFlightアプリをインストール**（App Storeから無料でダウンロード）
2. 招待メールのリンクをタップ、またはTestFlightアプリを開く
3. 「インストール」をタップ
4. アプリがインストールされます

## TestFlight vs App Store提出

| 項目 | TestFlight | App Store提出 |
|------|-----------|--------------|
| スクリーンショット | 不要 | 必須 |
| 説明文 | 不要 | 必須 |
| キーワード | 不要 | 必須 |
| 審査時間 | 数時間〜1日 | 1〜3日 |
| 配布範囲 | 最大10,000人 | 全世界 |
| 公開 | テスターのみ | 一般公開 |

## よくある質問

### Q: TestFlightのビルドは何日間有効ですか？

A: 90日間です。90日を過ぎると新しいビルドをアップロードする必要があります。

### Q: 外部テスターは何人まで招待できますか？

A: 最大10,000人まで招待可能です。

### Q: TestFlightからApp Storeに公開できますか？

A: はい、同じビルドをApp Storeに提出することもできます。ただし、App Store提出には追加の情報（スクリーンショット、説明文など）が必要です。

### Q: ビルドのバージョン番号はどう管理しますか？

A: `pubspec.yaml`の`version`フィールドで管理します。形式は `バージョン名+ビルド番号`（例: `1.0.0+1`）。TestFlightにアップロードするたびにビルド番号を増やす必要があります。

## トラブルシューティング

### ビルドが「処理中」のまま

- 通常、数分〜1時間で処理されます
- 1時間以上かかる場合は、App Store Connectのサポートに問い合わせ

### アップロードエラー

- Bundle Identifierが正しいか確認
- 証明書とプロビジョニングプロファイルが正しく設定されているか確認
- Xcodeで「Automatically manage signing」が有効になっているか確認

### テスターがアプリをインストールできない

- TestFlightアプリがインストールされているか確認
- 招待メールのリンクが有効か確認
- ビルドが90日を過ぎていないか確認

## 次のステップ

1. ✅ Xcodeでアーカイブを作成
2. ✅ TestFlightにアップロード
3. ✅ 内部テスターに配布
4. ✅ フィードバックを収集
5. ✅ 必要に応じて修正して再アップロード

---

**現在の状態**: App Store Connectでアプリ「satoyamadr」を作成済み

**次のステップ**: Xcodeでアーカイブを作成してTestFlightにアップロード

